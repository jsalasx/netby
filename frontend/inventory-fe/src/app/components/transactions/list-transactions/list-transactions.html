<div class="flex justify-center gap-5 py-5">
  <p-button label="Cargar" (click)="onLoadTransactions()" />
  <app-save-transaction></app-save-transaction>
</div>
<div class="flex justify-center">
<app-filter-transactions (filterToFetch)="onFilterTransactions($event)"></app-filter-transactions>
</div>

<app-get-transaction
  (onCloseDialog)="onCloseTransactionDialog()"
  [onClickView]="_onClickView()"
  [transaction]="selectedTransaction()"
></app-get-transaction>

<p-contextmenu #cm [model]="menuItems" />
<div class="p-5">
  <p-table
    [value]="transactions()"
    [(contextMenuSelection)]="selectedTransaction"
    [contextMenu]="cm"
    dataKey="id"
    [tableStyle]="{ 'min-width': '50rem' }"
    selectionMode="single"
  >
    <ng-template #header>
      <tr>
        <th>ID</th>
        <th>Type</th>
        <th>Total</th>
        <th>Comentario</th>
        <th>Fecha</th>
      </tr>
    </ng-template>
    <ng-template #body let-transaction>
      <tr
        class="cursor-pointer"
        (dblclick)="onGetTransaction(transaction)"
        [pSelectableRow]="transaction"
        [pContextMenuRow]="transaction"
      >
        <td>{{ transaction.id }}</td>
        <td>{{ transaction.type | typeTransactionType }}</td>
        <td>{{ transaction.totalAmount | priceFormatTotal }}</td>
        <td>{{ transaction.comment }}</td>
        <td>{{ transaction.createdAt | date:'medium': 'America/Guayaquil' }}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
<p-toast></p-toast>
<p-confirmdialog />
